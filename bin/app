#!/usr/bin/env node

var SECRET = process.env.DOGBOT_SECRET;

var dogbot = require('../src/dogbot.js')(SECRET);

process.on('SIGINT', function() {
    dogbot.stop(function () {
        process.exit(0);
    });
});

process.once('SIGUSR2', function () {
    dogbot.reload(function () {
        process.kill(process.pid, 'SIGUSR2');
    });
});

process.on('exit', function () {
});

process.on('uncaughtException', function (error) {
    dogbot.error(error);
});

if (SECRET === undefined) {
    dogbot.error("Please provide a dog.ai secret.", function () {
        process.exit(1);
    });
} else {
    dogbot.start(function () {
    });
}